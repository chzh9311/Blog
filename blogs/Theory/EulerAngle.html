<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.18">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>欧拉角和旋转矩阵的相互转化 | 夹心生菜</title><meta name="description" content="我从冲浪还被叫做冲浪的时候就开始冲浪了">
    <link rel="preload" href="/Blog/assets/style-Dph1_kgP.css" as="style"><link rel="stylesheet" href="/Blog/assets/style-Dph1_kgP.css">
    <link rel="modulepreload" href="/Blog/assets/app-0xUsLmj9.js"><link rel="modulepreload" href="/Blog/assets/EulerAngle.html-BG_5-LW3.js">
    <link rel="prefetch" href="/Blog/assets/timeline.html-DBtLbbDF.js" as="script"><link rel="prefetch" href="/Blog/assets/posts.html-DJc9fklC.js" as="script"><link rel="prefetch" href="/Blog/assets/friendship-link.html-DiFRMl4h.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-DY6VnwGk.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-BlaZhnqU.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-CuGciwBV.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-zqLnytJ8.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-DeeG0aPK.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-CDy9BCE_.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-CxmHLOtp.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-CK4pYSAq.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-DW0Cl_3x.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-plOR0zpX.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-Dn0o5tHq.js" as="script"><link rel="prefetch" href="/Blog/assets/1.html-xVbly4_f.js" as="script"><link rel="prefetch" href="/Blog/assets/index.html-DJwaG8jb.js" as="script"><link rel="prefetch" href="/Blog/assets/PathDisplay.html-uJFXKZ56.js" as="script"><link rel="prefetch" href="/Blog/assets/windows-atom-python-venv.html-mm4U5rJm.js" as="script"><link rel="prefetch" href="/Blog/assets/api.html-BtA8Xonv.js" as="script"><link rel="prefetch" href="/Blog/assets/home.html-4tM4Mf2Z.js" as="script"><link rel="prefetch" href="/Blog/assets/plugin.html-D0kv0lPw.js" as="script"><link rel="prefetch" href="/Blog/assets/theme.html-KZamVmZv.js" as="script"><link rel="prefetch" href="/Blog/assets/indentation-converter.html-BgHxb91p.js" as="script"><link rel="prefetch" href="/Blog/assets/latex-spacing.html-CJJITKqq.js" as="script"><link rel="prefetch" href="/Blog/assets/python-oneliner.html-R1I45RCT.js" as="script"><link rel="prefetch" href="/Blog/assets/BVH.html-fjNBdatr.js" as="script"><link rel="prefetch" href="/Blog/assets/camera-param.html-BJ6htlDS.js" as="script"><link rel="prefetch" href="/Blog/assets/quaternion.html-BqXDxSsF.js" as="script"><link rel="prefetch" href="/Blog/assets/remake.html-sT-RCALy.js" as="script"><link rel="prefetch" href="/Blog/assets/404.html-BgMQvwOf.js" as="script"><link rel="prefetch" href="/Blog/assets/Valine.min-CdX76AvO.js" as="script"><link rel="prefetch" href="/Blog/assets/giscus-2a044aea-MROpRZK_.js" as="script"><link rel="prefetch" href="/Blog/assets/setupDevtools-7MC2TMWH-DmX6Gx9V.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/Blog/icon.png" alt="夹心生菜"><a href="/Blog/" class="site-name can-hide">夹心生菜</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/Blog/" class="link" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/Blog/categories/lilunbiji/1.html" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/Blog/tags/CV/1.html" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/Blog/gallery/" class="link" aria-label="Gallery"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Gallery<!--]--></span></span><!--[--><!--]--></a></div><!--]--><!----><span class="xicon-container btn-toggle-dark-mode btn--dark-mode navbar-links__item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><ul class="social-links navbar-links__item"><!--[--><!--]--></ul></nav><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><!----><!----><div class="theme-main" style=""><!----><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">欧拉角和旋转矩阵的相互转化</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->CabbaFi<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2020-08-01<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/Blog/categories/lilunbiji/1.html" class="">理论笔记</a><!--]--><!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/Blog/tags/CV/1.html" class="">CV</a><!--]--><!--]--></span></span><!----></div><div class="theme-reco-md-content"><div><h2 id="欧拉角定义" tabindex="-1"><a class="header-anchor" href="#欧拉角定义"><span>欧拉角定义</span></a></h2><p>欧拉角 (Euler Angle)，由著名数学家莱昂哈德·欧拉 (1707-1783) 提出，故而得名。欧拉角旨在用三个角度来表示刚体在三维空间的旋转。这种表示方法经历了3个世纪，其实已经非常古老了，自身有一些局限性，塞利斯基 (Richard Szeliski) 所著《计算机视觉：算法与应用》一书中对欧拉角甚至只是一笔带过。但是欧拉角现在依然在广泛使用，因此仍然有深入学习的必要。</p><p>首先我们统一符号:</p><ul><li>$Oxyz$ 是世界坐标系，是固定不变的。</li><li>$OXYZ$ 是被旋转的局部坐标系。</li></ul><p>欧拉角的定义分为静态定义和动态定义。百度上说的很复杂，两种定义方式并没有给出很明确的区分，但是对我们计算需求而言，只需要一点区分就可以了，那就是：旋转是基于全局坐标系还是局部坐标系。</p><h3 id="基于局部坐标系的旋转" tabindex="-1"><a class="header-anchor" href="#基于局部坐标系的旋转"><span>基于局部坐标系的旋转</span></a></h3><p>有点“我绕着自己转”的意思。</p><p>最典型的欧拉角旋转为 $z-X-Z$ 顺序，即刚体先后绕 $z, X, Z$ 轴旋转角度 $\alpha, \beta, \gamma$。注意字母<strong>大小写</strong>，即最开始是绕全局坐标系的 $z$轴 旋转，之后按顺序绕自己局部坐标系的 $X$ 轴和 $Z$ 轴旋转，考虑到最开始两个坐标系是重合的，即 $z=Z$，这种旋转顺序也可以理解为 $ZXZ$。</p><p>这种旋转的流程如图所示。每张图中的红色椭圆代表了旋转轴的法平面。</p><p><img src="/Blog/assets/Coordinate3D-D8LBPDD8.png" alt=""></p><p>在维基百科的对欧拉角的解读中，有一张将过程整合的图，百度上也有但是清晰度要差很多。</p><p><img src="/Blog/assets/Eulerangles-CjicEDel.png" alt=""></p><h3 id="基于全局坐标系的旋转" tabindex="-1"><a class="header-anchor" href="#基于全局坐标系的旋转"><span>基于全局坐标系的旋转</span></a></h3><p>这种旋转非常好理解，世界坐标系是不变的，刚体的局部坐标系先后绕三个固定的轴作旋转，就是这种欧拉角的效果了。同样的，用分布图解来看，下图显示了顺序为$z-x-y$的欧拉角所展示的结果：</p><p>{% img dynamic.png 900 Dynamic definition %}</p><h2 id="三维旋转矩阵" tabindex="-1"><a class="header-anchor" href="#三维旋转矩阵"><span>三维旋转矩阵</span></a></h2><h3 id="基本旋转矩阵" tabindex="-1"><a class="header-anchor" href="#基本旋转矩阵"><span>基本旋转矩阵</span></a></h3><p>如果考虑一个很简单的旋转，这个旋转简单到只是绕着某个坐标轴旋转一个角度 $\theta$，绕着转的坐标轴所对应的坐标就不会有任何变化，而我们已经知道，二维平面的旋转矩阵是这样的：</p><p>$$ R(\theta)=\left[\begin{matrix} \cos\theta &amp; -\sin\theta \ \sin\theta &amp; \cos\theta \ \end{matrix}\right] $$</p><p>那第三个维度只要保持不变就好了。这就不难理解绕着三个基本坐标轴旋转特定角度所对应的旋转矩阵：</p><p>$$ R_x(\psi)=\left[\begin{matrix}1 &amp; 0 &amp; 0 \0 &amp; \cos\psi &amp; -\sin\psi \0 &amp; \sin\psi &amp; \cos\psi\end{matrix}\right] $$</p><p>$$ R_y(\theta)=\left[\begin{matrix} \cos\theta &amp; 0 &amp; \sin\theta \ 0 &amp; 1 &amp; 0 \ -\sin\theta &amp; 0 &amp; \cos\theta \end{matrix}\right] $$</p><p>$$ R_z(\varphi)=\left[\begin{matrix} \cos\varphi &amp; -\sin\varphi &amp; 0 \ \sin\varphi &amp; \cos\varphi &amp; 0 \ 0 &amp; 0 &amp; 1 \end{matrix}\right] $$</p><p>至此，有一个十分关键的点，就是这三个旋转矩阵的适用前提都是<strong>刚体的旋转轴是定义坐标时用的坐标系</strong>。这很好理解，毕竟这几个矩阵乘以三维向量后，都会有一个坐标值是不改变的，那么旋转就一定是绕这个轴进行的。</p><h2 id="旋转矩阵和两种欧拉角" tabindex="-1"><a class="header-anchor" href="#旋转矩阵和两种欧拉角"><span>旋转矩阵和两种欧拉角</span></a></h2><p>这里的两种欧拉角并不是指两种定义方式，而是上面说的两种参照，是绕自己的轴转，还是绕全局的轴转。</p><p>除了旋转方式的差异，我们所诉求的坐标不同也会导致结果的不同。有两种诉求：转向量和转坐标系。前者是旋转向量，同时带动向量的局部坐标系旋转；后者则是旋转局部坐标系，待求的向量在全局坐标系下是保持不变的。有趣的是，如果在转向量时，把局部坐标系作为我们的参考，那么就可以等效为响亮不动而转坐标系的情况。下面先说点固定不动，而转坐标系的情形下，怎么求<strong>局部坐标的变换矩阵</strong>。</p><p>规定一些事情以便比较：</p><ul><li>最开始全局坐标系和局部坐标系是重合的；</li><li>旋转的顺序都是 $xyz; (XYZ)$</li><li>旋转角保持和前面一节一致：分别是 $\psi, \theta, \varphi$.</li></ul><h3 id="绕局部坐标轴旋转" tabindex="-1"><a class="header-anchor" href="#绕局部坐标轴旋转"><span>绕局部坐标轴旋转</span></a></h3><p>如果旋转是绕着局部坐标系进行的，所有的坐标又都是或可以看成局部坐标系，那么我们就可以当全局坐标系不存在。假设变换前后的固定点在局部坐标系下的坐标分别是 $P_0$ 和 $P_1$.</p><p>第一步绕x轴旋转$\psi$角度，对应的旋转矩阵即为两者之间的坐标变换矩阵： $$ R_xP_x=P_0 $$</p><p>注意变换矩阵的位置，是乘在变换后的$P_x$的左边。同理：</p><p>$$ R_yP_{xy}=P_x $$</p><p>$$ R_zP_{xyz}=P_{xy} $$</p><p>其中 $P_{xyz}=P_{1}$.</p><p>三个式子迭代，就得到了 $$ R_xR_yR_zP_1=P_0 $$ 两者之间最终的坐标变换矩阵最终是这样的： $$ R_{local}=R_xR_yR_z $$ 反直觉的是，如果把 $P_1$ 和 $P_0$ 的关系换一种方法写： $$ P_1=R_z^TR_y^TR_x^TP_0 $$ 分开的三个矩阵的作用顺序是指定的 $x-y-z$，但他们是以转置，也就是逆矩阵的形式作用在 $P_0$ 上的。</p><p>下面问题来了，是不是绕全局坐标系旋转，他们就会以原形式作用呢？往下看。</p><h3 id="绕全局坐标轴旋转" tabindex="-1"><a class="header-anchor" href="#绕全局坐标轴旋转"><span>绕全局坐标轴旋转</span></a></h3><p>如果我们分步来看这个过程，会发现绕$x$的轴旋转完成后，两个坐标系不重合，我们的坐标都是被旋转的局部坐标系下的，而前面给出的绕坐标轴的旋转矩阵能够作用的前提是<strong>转轴是定义坐标所使用的坐标系的坐标轴</strong>，这一条件不成立，就无法使用上面的简单形式。 问题的本质是得到每一步相应的旋转矩阵。第一步与绕局部坐标旋转的情形无异： $$ R_xP_x=P_0 $$ 然而，接下来就不能直接用前面求得的 $R_y(\theta)$ 了，因为旋转轴不是局部坐标系的 $Y$ 轴了。我们需要把全局坐标系的 $y$ 轴正方向在局部坐标系中用单位向量 $\boldsymbol{n}<em>y$ 表示出来，经过旋转我们很好求得： $$ \boldsymbol{n}<em>y=R_x^T\left[0\quad 1\quad 0\right]^T \ $$ 第二步的坐标变换矩阵就变成了绕 $\boldsymbol{n}<em>y$ 旋转角度 $\theta$。对应的旋转矩阵很好计算但形式会比较复杂，记为 $R</em>{xy}$，那么第二步的转化可以写成 $$ R</em>{xy}P</em>{xy}=P_x $$ 同理，最后一步，需要得到两步旋转后全局$z$轴同向的 $\boldsymbol{n}<em>z$. $$ \boldsymbol{n}<em>z=R</em>{xy}^TR_x^T[0\quad 0\quad 1]^T $$ 绕 $\boldsymbol{n}<em>z$ 旋转角度 $\varphi$ 的矩阵是 $R</em>{xyz}$，那么 $$ R</em>{xyz}P_{xyz}=P_{xy} $$ 坐标变换矩阵就是： $$ R_{global}=R_xR_{xy}R_{xyz} $$ <s>这可比上一种情形要复杂得多，这也是为什么一般都用欧拉角的静态定义。</s></p><h4 id="勘误" tabindex="-1"><a class="header-anchor" href="#勘误"><span>勘误</span></a></h4><p>实际上绕全局固定坐标系旋转的欧拉角可以有更好的表达形式，上述的表达我认为是对的，但是没有什么实际意义。正式应用中，这种绕全局坐标轴旋转的欧拉角叫做 &quot;RPY&quot; (Roll, Pitch, Yaw)。先给出旋转矩阵的形式（按照 $x-y-z$ 的顺序旋转）： $$ R_{global}=R_zR_yR_x $$ 证明的话，可以从坐标变换的根本出发，即基底变换。全局坐标系的基底为： $$ [\boldsymbol{\varepsilon}_1\quad\boldsymbol{\varepsilon}_2\quad\boldsymbol{\varepsilon}_3]= \left[\begin{matrix} 1 &amp; 0 &amp; 0 \ 0 &amp; 1 &amp; 0 \ 0 &amp; 0 &amp; 1 \end{matrix}\right] $$ 在全局坐标系中的坐标为</p><p>三个基底都可以作为单独的向量。在对目标局部坐标系进行旋转时，对每个基底的旋转是等同的。最开始，目标基底和全局基底相等。本质上是对向量的旋转，以 $\boldsymbol{\varepsilon}_1$ 为例，首先绕x轴旋转，得到了 $R_x\boldsymbol{\varepsilon}_1$ 为新的基向量；下一步绕 $y$ 轴旋转，得到了 $R_y(R_x\boldsymbol{\varepsilon}_1)$；最后得到的是 $$ \boldsymbol{\varepsilon}_1^\prime=R_zR_yR_x\boldsymbol{\varepsilon}_1 $$ 因此，我们可以发现基底的变换满足： $$ [\boldsymbol{\varepsilon}_1^\prime\quad\boldsymbol{\varepsilon}_2^\prime\quad\boldsymbol{\varepsilon}_3^\prime]=R_zR_yR_x[\boldsymbol{\varepsilon}_1\quad\boldsymbol{\varepsilon}_2\quad\boldsymbol{\varepsilon}_3] $$ 这就可以直接作为坐标系之间的旋转变换关系了。</p><p>事实上，考虑到 $[\boldsymbol{\varepsilon}_1\quad\boldsymbol{\varepsilon}_2\quad\boldsymbol{\varepsilon}_3]=I$，上面的等式可以表达为更简单的形式： $$ [\boldsymbol{\varepsilon}_1^\prime\quad\boldsymbol{\varepsilon}_2^\prime\quad\boldsymbol{\varepsilon}_3^\prime]=R_zR_yR_x $$ 如果我们进一步想由此写出坐标转换关系，那么根据基底和坐标的关系： $$ [\boldsymbol{\varepsilon}_1^\prime\quad\boldsymbol{\varepsilon}_2^\prime\quad\boldsymbol{\varepsilon}_3^\prime]P_1=[\boldsymbol{\varepsilon}_1\quad\boldsymbol{\varepsilon}_2\quad\boldsymbol{\varepsilon}_3]P_0 $$ 即 $$ R_zR_yR_xP_1=P_0 $$</p><h3 id="转向量的情形" tabindex="-1"><a class="header-anchor" href="#转向量的情形"><span>转向量的情形</span></a></h3><p>针对向量的旋转问题中，我们更多关注的是：一个向量 $P_0$ 经过指定的旋转之后，得到的向量在原坐标系下的坐标 $P_1$。如果绕全局坐标系旋转，这个转换就很直接了（依然是按照 $x-y-z$)的顺序： $$ P_1=R_zR_yR_xP_0 $$ 而如果我们在转动向量的时候，是以其局部坐标为基准的（不要以为这种<s>反人类的</s>旋转方式不存在，事实上，BVH 中的节点旋转就可以说是这么定义的），那么可以逆向思考，即把这个旋转问题转化为坐标转换矩阵的求解。如果我们以局部坐标系为参考，那么旋转过程中向量的坐标是不变的，旋转等价于绕固定的三个轴对全局坐标系作<strong>方向相反</strong>的旋转。根据上面的求解的结果，我们知道坐标转换关系是： $$ R_z^TR_y^TR_x^TP_1=P_0 $$ 于是： $$ P_1=R_xR_yR_zP_0 $$</p><h2 id="the-end" tabindex="-1"><a class="header-anchor" href="#the-end"><span>The End</span></a></h2><p>这四种情形之间关系很密切，非常的绕……由于之前在处理 BVH (BioVision Hierarchy) 文件时，一直对文件里的三轴旋转理解有问题，所以查了很多资料，整理了一下。</p><!----><p>三张图片，除了第二章整合过程图是在<a href="https://commons.wikimedia.org/wiki/File:Euler.png" target="_blank" rel="noopener noreferrer">维基百科<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>上下载的，其他的两张分步过程图都是原创，要使用的话请注明出处：）</p><p>Thx.</p></div></div><footer class="page-meta"><!----><!----></footer><!----><!----></div><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#欧拉角定义" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="欧拉角定义"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->欧拉角定义<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#基于局部坐标系的旋转" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="基于局部坐标系的旋转"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->基于局部坐标系的旋转<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#基于全局坐标系的旋转" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="基于全局坐标系的旋转"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->基于全局坐标系的旋转<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#三维旋转矩阵" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="三维旋转矩阵"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->三维旋转矩阵<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#基本旋转矩阵" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="基本旋转矩阵"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->基本旋转矩阵<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#旋转矩阵和两种欧拉角" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="旋转矩阵和两种欧拉角"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->旋转矩阵和两种欧拉角<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#绕局部坐标轴旋转" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="绕局部坐标轴旋转"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->绕局部坐标轴旋转<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#绕全局坐标轴旋转" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="绕全局坐标轴旋转"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->绕全局坐标轴旋转<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#转向量的情形" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="转向量的情形"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->转向量的情形<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/Blog/blogs/Theory/EulerAngle.html#the-end" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="The End"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->The End<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/Blog/assets/app-0xUsLmj9.js" defer></script>
  </body>
</html>
